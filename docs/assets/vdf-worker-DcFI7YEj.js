(function(){"use strict";let o;function w(t){const e=o.__externref_table_alloc();return o.__wbindgen_export_2.set(e,t),e}function d(t,e){try{return t.apply(this,e)}catch(n){const r=w(n);o.__wbindgen_exn_store(r)}}const E=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&E.decode();let l=null;function h(){return(l===null||l.byteLength===0)&&(l=new Uint8Array(o.memory.buffer)),l}function a(t,e){return t=t>>>0,E.decode(h().subarray(t,t+e))}function p(t){return t==null}function A(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const i=t.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){const i=t.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(t)){const i=t.length;let _="[";i>0&&(_+=A(t[0]));for(let s=1;s<i;s++)_+=", "+A(t[s]);return _+="]",_}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(n&&n.length>1)r=n[1];else return toString.call(t);if(r=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:r}let f=0;const x=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},O=typeof x.encodeInto=="function"?function(t,e){return x.encodeInto(t,e)}:function(t,e){const n=x.encode(t);return e.set(n),{read:t.length,written:n.length}};function u(t,e,n){if(n===void 0){const c=x.encode(t),g=e(c.length,1)>>>0;return h().subarray(g,g+c.length).set(c),f=c.length,g}let r=t.length,i=e(r,1)>>>0;const _=h();let s=0;for(;s<r;s++){const c=t.charCodeAt(s);if(c>127)break;_[i+s]=c}if(s!==r){s!==0&&(t=t.slice(s)),i=n(i,r,r=s+t.length*3,1)>>>0;const c=h().subarray(i+s,i+r),g=O(t,c);s+=g.written,i=n(i,r,s,1)>>>0}return f=s,i}let b=null;function F(){return(b===null||b.buffer.detached===!0||b.buffer.detached===void 0&&b.buffer!==o.memory.buffer)&&(b=new DataView(o.memory.buffer)),b}function y(t){const e=o.__wbindgen_export_2.get(t);return o.__externref_table_dealloc(t),e}function R(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`)}const S=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>o.__wbg_vdfcomputer_free(t>>>0,1));class j{static __wrap(e){e=e>>>0;const n=Object.create(j.prototype);return n.__wbg_ptr=e,S.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,S.unregister(this),e}free(){const e=this.__destroy_into_raw();o.__wbg_vdfcomputer_free(e,0)}constructor(){const e=o.vdfcomputer_new();return this.__wbg_ptr=e>>>0,S.register(this,this.__wbg_ptr,this),this}static with_modulus(e){const n=u(e,o.__wbindgen_malloc,o.__wbindgen_realloc),r=f,i=o.vdfcomputer_with_modulus(n,r);if(i[2])throw y(i[1]);return j.__wrap(i[0])}compute_proof(e,n,r){const i=u(e,o.__wbindgen_malloc,o.__wbindgen_realloc),_=f,s=o.vdfcomputer_compute_proof(this.__wbg_ptr,i,_,n,p(r)?0:w(r));if(s[2])throw y(s[1]);return m.__wrap(s[0])}verify_proof(e,n){const r=u(e,o.__wbindgen_malloc,o.__wbindgen_realloc),i=f;R(n,m);const _=o.vdfcomputer_verify_proof(this.__wbg_ptr,r,i,n.__wbg_ptr);if(_[2])throw y(_[1]);return _[0]!==0}estimate_iterations_for_seconds(e){const n=o.vdfcomputer_estimate_iterations_for_seconds(this.__wbg_ptr,e);return BigInt.asUintN(64,n)}}const T=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>o.__wbg_vdfproof_free(t>>>0,1));class m{static __wrap(e){e=e>>>0;const n=Object.create(m.prototype);return n.__wbg_ptr=e,T.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,T.unregister(this),e}free(){const e=this.__destroy_into_raw();o.__wbg_vdfproof_free(e,0)}constructor(e,n,r,i,_){const s=u(e,o.__wbindgen_malloc,o.__wbindgen_realloc),c=f,g=u(n,o.__wbindgen_malloc,o.__wbindgen_realloc),U=f,D=u(r,o.__wbindgen_malloc,o.__wbindgen_realloc),B=f,N=u(i,o.__wbindgen_malloc,o.__wbindgen_realloc),z=f,V=o.vdfproof_new(s,c,g,U,D,B,N,z,_);return this.__wbg_ptr=V>>>0,T.register(this,this.__wbg_ptr,this),this}get y(){let e,n;try{const r=o.vdfproof_y(this.__wbg_ptr);return e=r[0],n=r[1],a(r[0],r[1])}finally{o.__wbindgen_free(e,n,1)}}get pi(){let e,n;try{const r=o.vdfproof_pi(this.__wbg_ptr);return e=r[0],n=r[1],a(r[0],r[1])}finally{o.__wbindgen_free(e,n,1)}}get l(){let e,n;try{const r=o.vdfproof_l(this.__wbg_ptr);return e=r[0],n=r[1],a(r[0],r[1])}finally{o.__wbindgen_free(e,n,1)}}get r(){let e,n;try{const r=o.vdfproof_r(this.__wbg_ptr);return e=r[0],n=r[1],a(r[0],r[1])}finally{o.__wbindgen_free(e,n,1)}}get iterations(){const e=o.vdfproof_iterations(this.__wbg_ptr);return BigInt.asUintN(64,e)}to_json(){let e,n;try{const _=o.vdfproof_to_json(this.__wbg_ptr);var r=_[0],i=_[1];if(_[3])throw r=0,i=0,y(_[2]);return e=r,n=i,a(r,i)}finally{o.__wbindgen_free(e,n,1)}}static from_json(e){const n=u(e,o.__wbindgen_malloc,o.__wbindgen_realloc),r=f,i=o.vdfproof_from_json(n,r);if(i[2])throw y(i[1]);return m.__wrap(i[0])}}async function L(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function W(){const t={};return t.wbg={},t.wbg.__wbg_buffer_609cc3eee51ed158=function(e){return e.buffer},t.wbg.__wbg_call_672a4d21634d4a24=function(){return d(function(e,n){return e.call(n)},arguments)},t.wbg.__wbg_call_7cccdd69e0791ae2=function(){return d(function(e,n,r){return e.call(n,r)},arguments)},t.wbg.__wbg_crypto_574e78ad8b13b65f=function(e){return e.crypto},t.wbg.__wbg_getRandomValues_b8f5dbd5f3995a9e=function(){return d(function(e,n){e.getRandomValues(n)},arguments)},t.wbg.__wbg_log_5b9c4377e97c70b5=function(e,n){console.log(a(e,n))},t.wbg.__wbg_msCrypto_a61aeb35a24c1329=function(e){return e.msCrypto},t.wbg.__wbg_new_a12002a7f91c75be=function(e){return new Uint8Array(e)},t.wbg.__wbg_newnoargs_105ed471475aaf50=function(e,n){return new Function(a(e,n))},t.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(e,n,r){return new Uint8Array(e,n>>>0,r>>>0)},t.wbg.__wbg_newwithlength_a381634e90c276d4=function(e){return new Uint8Array(e>>>0)},t.wbg.__wbg_node_905d3e251edff8a2=function(e){return e.node},t.wbg.__wbg_now_807e54c39636c349=function(){return Date.now()},t.wbg.__wbg_process_dc0fbacc7c1c06f7=function(e){return e.process},t.wbg.__wbg_randomFillSync_ac0988aba3254290=function(){return d(function(e,n){e.randomFillSync(n)},arguments)},t.wbg.__wbg_require_60cc747a6bc5215a=function(){return d(function(){return module.require},arguments)},t.wbg.__wbg_set_65595bdd868b3009=function(e,n,r){e.set(n,r>>>0)},t.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){const e=typeof global>"u"?null:global;return p(e)?0:w(e)},t.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){const e=typeof globalThis>"u"?null:globalThis;return p(e)?0:w(e)},t.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){const e=typeof self>"u"?null:self;return p(e)?0:w(e)},t.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){const e=typeof window>"u"?null:window;return p(e)?0:w(e)},t.wbg.__wbg_subarray_aa9065fa9dc5df96=function(e,n,r){return e.subarray(n>>>0,r>>>0)},t.wbg.__wbg_versions_c01dfd4722a88165=function(e){return e.versions},t.wbg.__wbg_warn_1e5be50445417c8a=function(e,n){console.warn(a(e,n))},t.wbg.__wbindgen_debug_string=function(e,n){const r=A(n),i=u(r,o.__wbindgen_malloc,o.__wbindgen_realloc),_=f;F().setInt32(e+4*1,_,!0),F().setInt32(e+4*0,i,!0)},t.wbg.__wbindgen_init_externref_table=function(){const e=o.__wbindgen_export_2,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)},t.wbg.__wbindgen_is_function=function(e){return typeof e=="function"},t.wbg.__wbindgen_is_object=function(e){const n=e;return typeof n=="object"&&n!==null},t.wbg.__wbindgen_is_string=function(e){return typeof e=="string"},t.wbg.__wbindgen_is_undefined=function(e){return e===void 0},t.wbg.__wbindgen_memory=function(){return o.memory},t.wbg.__wbindgen_number_new=function(e){return e},t.wbg.__wbindgen_string_new=function(e,n){return a(e,n)},t.wbg.__wbindgen_throw=function(e,n){throw new Error(a(e,n))},t}function M(t,e){return o=t.exports,I.__wbindgen_wasm_module=e,b=null,l=null,o.__wbindgen_start(),o}async function I(t){if(o!==void 0)return o;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=new URL("/assets/vdf_wasm_bg-n_nNcBiV.wasm",self.location.href));const e=W();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await L(await t,e);return M(n,r)}let v=null;self.addEventListener("message",async t=>{const{input:e,iterations:n,jobId:r}=t.data;try{v||(await I(new URL("/assets/vdf_wasm_bg-n_nNcBiV.wasm",self.location.href)),v=new j);const i=c=>{self.postMessage({type:"progress",jobId:r,progress:c})},_=await v.compute_proof(e,BigInt(n),i),s={y:_.y,pi:_.pi,l:_.l,r:_.r,iterations:n};self.postMessage({type:"complete",jobId:r,proof:s})}catch(i){self.postMessage({type:"error",jobId:r,error:String(i)})}})})();
